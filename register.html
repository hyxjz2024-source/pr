<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>æ–°åŠ å·ï½œ10/24 å…¬è¨­ç¸½é©—æ”¶å ±å</title>
  <meta name="description" content="å…¬è¨­ç¸½é©—æ”¶åˆ†çµ„èªªæ˜èˆ‡ä½æˆ¶å ±åï¼ˆGitHub+GASï¼‰" />
  <style>
    :root{
      --ink:#0f172a; --muted:#64748b; --brand:#0ea5e9; --ok:#16a34a; --err:#dc2626; --bg:#f8fafc; --card:#ffffff; --radius:16px;
    }
    *{box-sizing:border-box}
    body{margin:0; font-family:"Noto Sans TC", system-ui, -apple-system, Segoe UI, Roboto, sans-serif; color:var(--ink); background:var(--bg);}    
    .wrap{max-width:min(1080px,100% - 24px); margin:24px auto;}
    header{display:grid; gap:10px; margin-bottom:20px}
    .hero{background:linear-gradient(135deg,#e0f2fe,#fff); padding:20px; border-radius:var(--radius); box-shadow:0 6px 18px rgba(15,23,42,.06)}
    h1{margin:0 0 6px; font-size:clamp(22px,3.2vw,32px);color: #14178A}
    .meta{color:var(--muted); font-size:14px}

    .grid{display:grid; gap:14px}
    @media (min-width:900px){ .grid{grid-template-columns: 1fr 360px;} }

    .card{background:var(--card); border-radius:var(--radius); padding:16px; box-shadow:0 6px 18px rgba(15,23,42,.06)}
    .list{display:grid; gap:10px}
    .item{border:1px solid #e5e7eb; border-radius:14px; padding:12px}
    .item h3{margin:0 0 6px; font-size:18px}
    .item p{margin:0; color:var(--muted); font-size:14px}

    form{display:grid; gap:10px}
    label{font-weight:600}
    input,select,button,textarea{width:100%; padding:10px 12px; border:1px solid #e5e7eb; border-radius:12px; font:inherit}
    textarea{min-height:90px}
    button{background:var(--brand); color:#fff; border:none; cursor:pointer; font-weight:700}
    button[disabled]{opacity:.6; cursor:not-allowed}

    .toast{position:fixed; inset:auto 16px 16px auto; background:#fff; border:1px solid #e5e7eb; box-shadow:0 6px 20px rgba(15,23,42,.12); padding:10px 12px; border-radius:12px; display:none}
    .toast.ok{border-color:#bbf7d0}
    .toast.err{border-color:#fecaca}
    .hint{font-size:12px; color:var(--muted)}
    .req{color:#ef4444}
  </style>
</head>
<body>
  <div class="wrap">
    <header class="hero">
      <h1>æ–°åŠ å·ï½œ10/24 å…¬è¨­ç¸½é©—æ”¶</h1>
      <h2>åˆ†çµ„èªªæ˜ï¼‹ä½æˆ¶å ±å</h2>
      <div class="meta">ğŸ“… æ™‚é–“ï¼š10/24ï¼ˆäº”ï¼‰09:00â€“17:00ï½œå…¨å€å…¬è¨­é©—æ”¶ï¼ˆé™¤é›»æ¢¯å¤–ï¼‰</div>
      <div class="meta">ğŸ“ é›†åˆåœ°é»ï¼šç¤¾å€å¤§å»³</div>
      <div class="meta">ğŸ‘¥ åƒåŠ äººå“¡ï¼šç®¡å§”æœƒï¼ä½æˆ¶ Ã— å»ºå•†ï¼å» å•† Ã— åœ‹éœ–æ©Ÿé›»</div>
      <div class="meta" style="margin-top:6px; color:#334155;">
        ğŸ’¡ ä½æˆ¶å¯å…¨ç¨‹åƒèˆ‡ï¼Œä¸­é€”è‹¥æœ‰äº‹å¯è‡ªç”±é›¢é–‹ï¼Œä¸å½±éŸ¿æµç¨‹ã€‚<br>
        æ­¡è¿å¤§å®¶ä¾è‡ªèº«æ™‚é–“å½ˆæ€§åƒåŠ ï¼Œä¸€èµ·äº†è§£ç¤¾å€å„é …è¨­å‚™é‹ä½œã€‚
      </div>
    </header>

    <div class="grid">
      <!-- å·¦å´ï¼šèªªæ˜æ¸…å–® -->
      <section class="card">
        <h2 style="margin-top:0">åˆ†çµ„èˆ‡èªªæ˜</h2>
        <div class="list" id="groupList"></div>
      </section>

      <!-- å³å´ï¼šå ±åè¡¨å–® -->
      <aside class="card">
        <h2 style="margin-top:0">æˆ‘è¦å ±å</h2>
        <form id="signupForm" novalidate>
          <div>
            <label>å§“å <span class="req">*</span></label>
            <input name="name" required placeholder="ä¾‹ï¼šç‹å°æ˜" />
          </div>
          <div>
            <label>æ£Ÿåˆ¥ï¼æ¨“å±¤ <span class="req">*</span></label>
            <input name="unit" required placeholder="ä¾‹ï¼šC æ£Ÿ 12F" />
          </div>
          <div>
            <label>è¯çµ¡æ‰‹æ©Ÿ <span class="req">*</span></label>
            <input name="phone" required inputmode="numeric" placeholder="09xx-xxx-xxx" />
          </div>
          <div>
            <label>å ±åçµ„åˆ¥ <span class="req">*</span></label>
            <select name="group" required id="groupSelect"></select>
          </div>
          <div>
            <label>å¯åƒèˆ‡æ™‚æ®µ</label>
            <select name="slot">
              <option value="å…¨ç¨‹(09:00â€“17:00)">å…¨ç¨‹(09:00â€“17:00)</option>
              <option value="ä¸Šåˆ(09:00â€“11:30)">ä¸Šåˆ(09:00â€“11:30)</option>
              <option value="ä¸‹åˆ(13:00â€“17:00)">ä¸‹åˆ(13:00â€“17:00)</option>
            </select>
          </div>
          <div>
            <label>å‚™è¨»ï¼ˆé¸å¡«ï¼‰</label>
            <textarea name="note" placeholder="æƒ³èˆ‡å“ªä½é„°å±…åŒçµ„ã€æˆ–æœ‰å°ˆé•·å¯å”åŠ©ç­‰"></textarea>
          </div>

          <button id="submitBtn" type="submit">é€å‡ºå ±å</button>
          <div class="hint">å ±åè³‡æ–™åƒ…ç”¨æ–¼æœ¬æ¬¡é©—æ”¶ä¹‹ç¾å ´å®‰æ’èˆ‡ç´€éŒ„ã€‚</div>
        </form>
      </aside>
    </div>
  </div>

  <div class="toast" id="toast"></div>

  <script>
    // === 1) çµ„åˆ¥è³‡æ–™ ===
    const GROUPS = [
      {id:1, name:"å…¨å€å°è¦½çµ„", desc:"ç”±é©—æ”¶å°ˆå“¡å¸¶é ˜å·¡è¦–å„é …æª¢é©—å€åŸŸèˆ‡æ–¹å¼ï¼Œé€²è¡Œæµç¨‹èˆ‡é‡é»èªªæ˜å°è¦½ï¼Œä¸åƒèˆ‡å¯¦éš›é©—æ¸¬ã€‚"},
      {id:2, name:"é›»æ°£çµ„", desc:"é™ªåŒæª¢æ¸¬é…é›»ç›¤ã€é›»è¡¨ã€è¿´è·¯ã€æ¥åœ°æ¸¬è©¦èˆ‡é›»å£“é›»æµå®‰å…¨æ€§ã€‚"},
      {id:3, name:"ç™¼é›»æ©Ÿçµ„", desc:"é™ªåŒæ¨¡æ“¬åœé›»ã€ATSåˆ‡æ›ã€å‚™æ´ä¾›é›»èˆ‡è­¦å ±åŠŸèƒ½æ¸¬è©¦ã€‚"},
      {id:4, name:"æ¶ˆé˜²é›»çµ„", desc:"é™ªåŒæª¢æŸ¥æ¶ˆé˜²æ§åˆ¶ç›¤ã€è­¦å ±è¨­å‚™é›»æ°£é€£å‹•æ¸¬è©¦ã€‚"},
      {id:5, name:"æ¶ˆé˜²æ°´çµ„", desc:"é™ªåŒæ¸¬è©¦æ¶ˆé˜²æ³µæµ¦ä¾›æ°´ã€æ”¾æ°´ã€å£“åŠ›èˆ‡æ³¡æ²«æ¸¬è©¦åŠé€£å‹•ã€‚"},
      {id:6, name:"çµ¦æ’æ°´çµ„", desc:"é™ªåŒæª¢æŸ¥ä¾›æ°´ã€æ’æ°´ã€æŠ½æ°´æ©Ÿèˆ‡é›†æ°´äº•ç­‰å‹•éœæ…‹æ¸¬è©¦ã€‚"},
      {id:7, name:"å¼±é›»çµ„", desc:"é™ªåŒæª¢æŸ¥é–€ç¦ã€å°è¬›ã€ç›£æ§ã€ç¶²è·¯èˆ‡æ©Ÿæˆ¿è¨­å‚™ã€‚"},
      {id:8, name:"é€šé¢¨ç©ºèª¿çµ„", desc:"é™ªåŒæª¢æŸ¥åœ°ä¸‹å®¤é€šé¢¨èˆ‡å°æµé¢¨æ©Ÿé‹è½‰ã€é¢¨é‡èˆ‡ç•°éŸ³ã€‚"},
      {id:9, name:"åœŸå»ºçµ„", desc:"é™ªåŒæª¢æŸ¥çµæ§‹å¤–è§€ã€ç‰†é¢ã€åœ°åªã€é–€æ¡†åŠå…¬å…±å€åŸŸç¼ºå¤±ã€‚"}
    ];

    const list = document.getElementById('groupList');
    const select = document.getElementById('groupSelect');
    GROUPS.forEach(g => {
      const div = document.createElement('div');
      div.className = 'item';
      div.innerHTML = `<h3>${g.id}. ${g.name}</h3><p>${g.desc}</p>`;
      list.appendChild(div);

      const opt = document.createElement('option');
      opt.value = `${g.id}. ${g.name}`;
      opt.textContent = `${g.id}. ${g.name}`;
      select.appendChild(opt);
    });

    // === 2) æç¤º ===
    const toast = (msg, ok=false) => {
      const el = document.getElementById('toast');
      el.textContent = msg; el.className = `toast ${ok? 'ok':'err'}`; el.style.display = 'block';
      setTimeout(()=>{ el.style.display='none'; }, 3600);
    };

    // === 3) é€å‡ºè¡¨å–®ï¼ˆtext/plainï¼‰ ===
    const WEB_APP_URL = 'https://script.google.com/macros/s/AKfycby26Pv-rQbQ6FDAt3ivxhCj-3jRS70hzfXyoZ1PsVvDamU45PK8EHrwSyhtRhK3HSxs/exec';

    const form = document.getElementById('signupForm');
    const btn  = document.getElementById('submitBtn');

    form.addEventListener('submit', async (e)=>{
      e.preventDefault();
      if(!form.reportValidity()) return;

      const data = Object.fromEntries(new FormData(form).entries());
      data._ts = new Date().toISOString();

      btn.disabled = true; btn.textContent = 'å‚³é€ä¸­â€¦';
      try{
        const res = await fetch(WEB_APP_URL, {
          method: 'POST',
          headers: { 'Content-Type': 'text/plain;charset=utf-8' },
          body: JSON.stringify({ action:'signup', payload: data })
        });
        const text = await res.text();
        const json = JSON.parse(text);

        if(json?.ok){
          toast('å ±åæˆåŠŸï¼Œæ„Ÿè¬åƒèˆ‡ï¼', true);
          form.reset();
        }else{
          throw new Error(json?.message || 'ç™¼ç”ŸæœªçŸ¥éŒ¯èª¤');
        }
      }catch(err){
        console.error(err);
        toast('é€å‡ºå¤±æ•—ï¼š' + err.message);
      }finally{
        btn.disabled = false; btn.textContent = 'é€å‡ºå ±å';
      }
    });
  </script>
</body>
</html>
